<section>
  <p>
    CSS frameworks like <a href="https://getbootstrap.com">Bootstrap</a> or
    <a href="https://tailwindcss.com">Tailwind</a> are excellent off-the-shelf
    solutions for styling websites.
  </p>
  <p>
    One additional benefit of some CSS frameworks is that you can even reduce
    the size of your CSS bundle with
    <u>tree shaking</u>. <em>Tree shaking</em> is a build-time process that
    optimises your CSS bundles by removing unused styles.
  </p>
  <details>
    <summary>
      Tailwind is a "utility-first" CSS framework that provides tree shaking out
      of the box, which helps you develop quickly by avoiding the need to write
      custom classes.
    </summary>
    <p>
      <u>Utility-first</u> refers to how Tailwind provides CSS utilities (e.g.,
      <code>text-blue-500</code>) that can be assembled to make a desired design
      inside of HTML markup, as opposed to writing custom classes with semantic
      naming like <code>card</code> or <code>banner</code>.
    </p>
    <p>
      <a
        href="https://github.com/tailwindlabs/tailwindcss/blob/0d9e1907/src/cli/build/plugin.js#L326"
        >Under the hood</a
      >, Tailwind uses <a href="https://postcss.org">postcss</a> to filter out
      styles that you are not using.
    </p>
  </details>
  <p>
    For my personal website, I plan to write my own HTML, CSS, and JS as
    much as possible. What follows is my research and integration of tree
    shaking tactics into my website's current build system.
  </p>
</section>
<hr />
<section>
  <p>
    To start, the bundled size of stylesheets can be inspected using the <em>Network</em>
    tab in a chromium-based browser. Type <code>ctrl+shift+i</code> and click on the tab
    named "Network". Next type <code>ctrl+shift+p</code> to open the command input box. Type
    "computed" and select the first option. In the below screenshot, I also filted by "assets"
    so that I could inspect just the styles deployed on my website:
  </p>
  <p>
    TODO: image here.
  </p>
  <p>
    A few notable observations:
  </p>
  <ol>    
    <li>
      <u>Unused styles</u>: The <em>computed</em> tab shows how much of each 
      resource is used on the current page. Notice how the "base" stylesheet has a high percentage of
      unused styles. 
    </li>
    <li>
      <u>Bundle size</u>: Both the <em>network</em> and <em>computed</em> tab show 
      the size for each resource delivered. 
    </li>
  </ol>
  <p>
    The high percentage of unused styles in the "base" stylesheet should be expected. This is
    because my base stylesheet provides common utilities and style modules that are used 
    across the site. 
  </p>
  <p>
    One way to reduce base stylesheets is to identify classes or utilities that exist on only 
    one page and move those classes to a unique stylesheet for that page. 
  </p>
  <p>
    However in this blog post, I am not concerned about the unused style percentage,
    as by it's nature "base" styles will have some unused styles on any given page. Instead, 
    my current goal is to reduce the size of the bundle, as there are likely classes that can 
    be removed that are not used on any page at all. So bundle size will be my benchmark to 
    measure tree-shaking tools against in the remainder of this blog post.
  </p>
  <table>
    <thead>
      <tr>
        <td>
          Stylesheet
        </td>
        <td>
          Before 
        </td>
        <td>
          After
        </td>
        <td>
          Difference
        </td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th>
          base.scss
        </th>
        <td>
          20,780
        </td>
        <td>
          ---
        </td>
        <td>
          ---
        </td>
      </tr>
      <tr>
        <th>
          blog.scss
        </th>
        <td>
          712 b
        </td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <th>
          index.scss
        </th>
        <td>
          227 b
        </td>
        <td>
          ---
        </td>
        <td>
          ---
        </td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <th>
          TOTAL:
        </th>
        <td>
          21,719 b
        </td>
        <td>
          ---
        </td>
        <td>
          ---
        </td>
      </tr>
    </tfoot>
  </table>
</section>
<section>
  - todo: - generate .webp images for thumbnail + computed bundle size
  screenshots - current bundle size and why it was that way - how my current build
  system works - how purgecss works - final product
</section>
